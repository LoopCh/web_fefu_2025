{% extends "../base.html" %}

{% block title %}{{ title }}{% endblock %}
{% block heading %}Добро пожаловать в университет!{% endblock %}

{% block content %}
  <div style="text-align: center; margin-bottom: 30px;">
    <p>Добро пожаловать на портал университета ДВФУ!</p>
    {% if user %}
      <p>Привет, <strong>{{ user }}</strong>!</p>
    {% endif %}
  </div>

  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
    <div style="padding: 20px; background-color: #e7f3ff; border-radius: 8px; text-align: center;">
      <h2 style="margin: 0; color: #007bff;">{{ total_students }}</h2>
      <p style="margin: 10px 0 0 0;">Активных студентов</p>
    </div>
    <div style="padding: 20px; background-color: #fff3cd; border-radius: 8px; text-align: center;">
      <h2 style="margin: 0; color: #856404;">{{ total_courses }}</h2>
      <p style="margin: 10px 0 0 0;">Доступных курсов</p>
    </div>
    <div style="padding: 20px; background-color: #d4edda; border-radius: 8px; text-align: center;">
      <h2 style="margin: 0; color: #155724;">{{ total_instructors }}</h2>
      <p style="margin: 10px 0 0 0;">Преподавателей</p>
    </div>
  </div>

  {% if recent_courses %}
  <div style="margin-top: 30px;">
    <h2>Новые курсы</h2>
    <ul style="list-style: none; padding: 0;">
      {% for course in recent_courses %}
        <li style="margin-bottom: 15px; padding: 15px; border: 1px solid #ddd; border-radius: 5px;">
          <a href="{% url 'fefu_lab:course_detail' course.slug %}" style="font-size: 18px; font-weight: bold; text-decoration: none; color: #007bff;">{{ course.title }}</a>
          <br>
          <p style="margin: 10px 0;">{{ course.description|truncatewords:15 }}</p>
          <small style="color: #666;">
            <strong>Преподаватель:</strong> 
            {% if course.instructor %}
              {{ course.instructor.full_name }}
            {% else %}
              Не назначен
            {% endif %}
            | <strong>Уровень:</strong> {{ course.get_level_display }}
            | <strong>Длительность:</strong> {{ course.duration }} ч.
          </small>
        </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <div style="margin-top: 30px; text-align: center;">
    <a href="{% url 'fefu_lab:student_list' %}" style="display: inline-block; padding: 10px 20px; margin: 5px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px;">Все студенты</a>
    <a href="{% url 'fefu_lab:course_list' %}" style="display: inline-block; padding: 10px 20px; margin: 5px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px;">Все курсы</a>
  </div>
{% endblock %}
